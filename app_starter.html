<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì•± ë‹¤ìš´ë¡œë“œ</title>
    
    <!-- Open Graph ë©”íƒ€ íƒœê·¸ (ì¹´í†¡, í˜ì´ìŠ¤ë¶ ë“± ê³µìœ ì‹œ í‘œì‹œ) -->
    <meta property="og:title" content="ì•± ì´ë¦„">
    <meta property="og:description" content="ì§€ê¸ˆ ì•±ì„ ë‹¤ìš´ë¡œë“œí•˜ì„¸ìš”!">
    <meta property="og:image" content="https://your-domain.com/app-icon.png">
    
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .container {
            text-align: center;
            padding: 20px;
        }
        
        .loading {
            font-size: 24px;
            margin-bottom: 20px;
        }
        
        .spinner {
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top: 3px solid white;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .manual-links {
            margin-top: 30px;
            opacity: 0;
            animation: fadeIn 1s forwards;
            animation-delay: 2s;
        }
        
        @keyframes fadeIn {
            to { opacity: 1; }
        }
        
        .store-button {
            display: inline-block;
            margin: 10px;
            padding: 12px 24px;
            background: white;
            color: #667eea;
            text-decoration: none;
            border-radius: 25px;
            font-weight: bold;
            transition: transform 0.2s;
        }
        
        .store-button:hover {
            transform: scale(1.05);
        }
        
        .error-message {
            display: none;
            color: #ff6b6b;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="loading">ì•± ìŠ¤í† ì–´ë¡œ ì´ë™ ì¤‘...</div>
        <div class="spinner"></div>
        
        <!-- í…ŒìŠ¤íŠ¸ ì•ˆë‚´ ë©”ì‹œì§€ -->
        <div style="background: rgba(255,255,255,0.2); padding: 20px; border-radius: 10px; margin: 20px 0;">
            <p>âš ï¸ í˜„ì¬ ìë™ ì´ë™ì´ ë¹„í™œì„±í™”ë˜ì–´ ìˆìŠµë‹ˆë‹¤</p>
            <p style="font-size: 14px;">ì‹¤ì œ ì‚¬ìš©ì‹œ 94ë²ˆì§¸ ì¤„ ì£¼ì„ì„ í•´ì œí•˜ì„¸ìš”</p>
        </div>
        
        <!-- ìë™ ë¦¬ë‹¤ì´ë ‰íŠ¸ê°€ ì‹¤íŒ¨í•  ê²½ìš°ë¥¼ ëŒ€ë¹„í•œ ìˆ˜ë™ ë§í¬ -->
        <div class="manual-links">
            <p>ìë™ìœ¼ë¡œ ì´ë™ë˜ì§€ ì•Šë‚˜ìš”?</p>
            <button onclick="redirect()" class="store-button" style="background: #4CAF50; color: white; cursor: pointer;">
                ğŸš€ ì§€ê¸ˆ ë¦¬ë‹¤ì´ë ‰íŠ¸ í…ŒìŠ¤íŠ¸
            </button>
            <br><br>
            <p>ë˜ëŠ” ì§ì ‘ ì„ íƒ:</p>
            <a href="https://apps.apple.com/app/id6737678222" class="store-button" id="ios-link">
                ğŸ“± App Store
            </a>
            <a href="https://play.google.com/store/apps/details?id=com.estherformula.estherpack.android" class="store-button" id="android-link">
                ğŸ¤– Google Play
            </a>
        </div>
        
        <div class="error-message" id="error">
            ìŠ¤í† ì–´ë¡œ ì´ë™í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ìœ„ ë²„íŠ¼ì„ í´ë¦­í•´ì£¼ì„¸ìš”.
        </div>
    </div>

    <script>
        // âš ï¸ ì•„ë˜ URLë“¤ì„ ì‹¤ì œ ì•± ìŠ¤í† ì–´ URLë¡œ ë³€ê²½í•˜ì„¸ìš”!
        const APP_STORES = {
            ios: 'https://apps.apple.com/app/id6737678222',  // iOS ì•± ìŠ¤í† ì–´ URL
            android: 'https://play.google.com/store/apps/details?id=com.estherformula.estherpack.android',  // ì•ˆë“œë¡œì´ë“œ í”Œë ˆì´ìŠ¤í† ì–´ URL
            fallback: 'https://your-website.com'  // ë‘˜ ë‹¤ ì•„ë‹ ê²½ìš° (ë°ìŠ¤í¬í†± ë“±) ì´ë™í•  URL
        };

        // ì•± ìŠ¤í† ì–´ URL ì—…ë°ì´íŠ¸ (ìˆ˜ë™ ë§í¬ìš©)
        document.getElementById('ios-link').href = APP_STORES.ios;
        document.getElementById('android-link').href = APP_STORES.android;

        function detectOS() {
            const userAgent = navigator.userAgent || navigator.vendor || window.opera;
            
            // iOS ê°ì§€
            if (/iPad|iPhone|iPod/.test(userAgent) && !window.MSStream) {
                return 'ios';
            }
            
            // Android ê°ì§€
            if (/android/i.test(userAgent)) {
                return 'android';
            }
            
            // ê·¸ ì™¸ (ë°ìŠ¤í¬í†± ë“±)
            return 'other';
        }

        function redirect() {
            const os = detectOS();
            let targetUrl;
            
            switch(os) {
                case 'ios':
                    targetUrl = APP_STORES.ios;
                    break;
                case 'android':
                    targetUrl = APP_STORES.android;
                    break;
                default:
                    targetUrl = APP_STORES.fallback;
            }
            
            // ë¦¬ë‹¤ì´ë ‰íŠ¸ ì‹œë„
            try {
                window.location.replace(targetUrl);
            } catch (e) {
                // ì—ëŸ¬ ë°œìƒì‹œ ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ
                document.getElementById('error').style.display = 'block';
            }
        }

        // í˜ì´ì§€ ë¡œë“œ í›„ ì•½ê°„ì˜ ë”œë ˆì´ë¥¼ ë‘ê³  ë¦¬ë‹¤ì´ë ‰íŠ¸
        // (ì‚¬ìš©ìê°€ ë¡œë”© í™”ë©´ì„ ë³¼ ìˆ˜ ìˆë„ë¡)
        // âš ï¸ í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ ìë™ ì´ë™ ë¹„í™œì„±í™” - ì‹¤ì œ ì‚¬ìš©ì‹œ ì£¼ì„ í•´ì œí•˜ì„¸ìš”!
        // setTimeout(redirect, 1000);

        // URL íŒŒë¼ë¯¸í„° ì²˜ë¦¬ (ì„ íƒì‚¬í•­)
        // ì˜ˆ: redirect.html?campaign=summer2024
        const urlParams = new URLSearchParams(window.location.search);
        const campaign = urlParams.get('campaign');
        
        if (campaign) {
            // ìº í˜ì¸ íŒŒë¼ë¯¸í„°ê°€ ìˆìœ¼ë©´ ìŠ¤í† ì–´ URLì— ì¶”ê°€
            // ì´ë¥¼ í†µí•´ ì–´ë–¤ ìº í˜ì¸ì—ì„œ ìœ ì…ëëŠ”ì§€ ì¶”ì  ê°€ëŠ¥
            const separator = APP_STORES.ios.includes('?') ? '&' : '?';
            APP_STORES.ios += `${separator}ct=${campaign}`;
            APP_STORES.android += `&referrer=utm_source%3D${campaign}`;
        }
        
        // ë””ë²„ê·¸ ëª¨ë“œ (ê°œë°œì‹œ ìœ ìš©)
        const debug = urlParams.get('debug');
        // í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ í•­ìƒ ë””ë²„ê·¸ ì •ë³´ í‘œì‹œ (ì‹¤ì œ ì‚¬ìš©ì‹œ ì´ ë¶€ë¶„ ì‚­ì œ)
        if (debug === 'true' || true) {
            console.log('Detected OS:', detectOS());
            console.log('User Agent:', navigator.userAgent);
            console.log('Redirect URLs:', APP_STORES);
            
            // í™”ë©´ì—ë„ ë””ë²„ê·¸ ì •ë³´ í‘œì‹œ
            const debugInfo = document.createElement('div');
            debugInfo.style.cssText = 'background: rgba(0,0,0,0.3); padding: 15px; border-radius: 10px; margin-top: 20px; font-size: 14px; text-align: left;';
            debugInfo.innerHTML = `
                <strong>ë””ë²„ê·¸ ì •ë³´:</strong><br>
                OS: ${detectOS()}<br>
                User Agent: ${navigator.userAgent.substring(0, 100)}...<br>
                iOS URL: ${APP_STORES.ios}<br>
                Android URL: ${APP_STORES.android}
            `;
            document.querySelector('.container').appendChild(debugInfo);
        }
    </script>
</body>
</html>
